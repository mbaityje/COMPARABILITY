"0","plot_dataset_availability <-"
"0","  df_full %>% "
"0","  select(dataset_availability) %>% "
"0","  mutate(dataset_availability = replace_na(dataset_availability, ""not reported"")) %>% "
"0","  mutate(dataset_availability = str_replace_all(dataset_availability, ""not reported"", ""no"")) %>% "
"0","  mutate(dataset_availability = str_replace_all(dataset_availability, ""NA"", ""no"")) %>% "
"0","  mutate(dataset_availabilty_general = case_when("
"0","    str_detect(dataset_availability, ""yes"") ~ ""yes"","
"0","    dataset_availability == ""not reported"" ~ ""not reported"","
"0","    dataset_availability == ""no"" ~ ""no"","
"0","    dataset_availability == ""from source"" ~ ""yes"","
"0","    dataset_availability == ""on request"" ~ ""no"""
"0","  )) %>% "
"0","  count(dataset_availabilty_general, dataset_availability) %>%  "
"0","    mutate(dataset_availability = factor(dataset_availability, levels=c(""no"", ""on request"", ""from source"", ""yes (public data only)"", ""yes""))) %>% "
"0","  ggplot(aes(y=fct_reorder(dataset_availabilty_general, n), n, fill = dataset_availability))+"
"0","  geom_col(col = ""darkgrey"")+"
"0","   scale_fill_manual(values = c(""no"" = ""#8c1c13"","
"0","                               ""yes"" = ""#a7c957"","
"0","                               ""on request"" = ""#bc4749"","
"0","                               ""from source"" = ""#6a994e"","
"0","                               ""yes (public data only)"" = ""#386641""))+"
"0","  labs(y="""","
"0","       x=""Number of studies"","
"0","       title = ""Dataset availability"","
"0","       fill = """")+"
"0","  theme(legend.position = ""bottom"","
"0","        plot.caption = element_text(hjust = 0),"
"0","        plot.title.position = ""plot"","
"0","        plot.caption.position =  ""plot"","
"0","    # legend.position.inside =  c(0.85, 0.75),"
"0","    legend.text=element_text(size=8))+"
"0","  guides(fill = guide_legend(ncol = 2, override.aes = list(size = 0.8)))"
"0",""
"0","plot_dataset_availability"
